
<style>
  <link rel="stylesheet" href="http://github.hubspot.com/odometer/themes/odometer-theme-car.css" />
</style>

<ion-header [ngClass]="{'barrel_roll': doRoll == true }">
  <ion-navbar color="primary">
    <button ion-button [menuToggle]="activeMenu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title *ngIf="!isMobile"><span>Assessed Projects</span></ion-title>
    <ion-title *ngIf="isMobile">Projects</ion-title>

    <div *ngIf="!isMobile" class="titleicon" >
      <!-- <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Ameren_logo.svg/2000px-Ameren_logo.svg.png" width="100px" style="margin-bottom:9px;margin-right:10px;" /> -->
      <img  (click)="roll()" src="https://s3.amazonaws.com/turboarb/assets/imgs/ameren-white-logo.png" width="100px" style="margin-right:10px; cursor:alias;" />

    </div>

    <ion-buttons large end>
      <button ion-button outline clear (click)="animateOdometer(projects)">
        <span style="font-family:Arial Narrow, Helvetica, sans-serif;font-size:2rem">Total:</span> &nbsp;
        <ng2-odometer [number]="odo" [config]="{ animation: 'count', format: 'd', theme: 'car', value: 0, auto: true }">
        </ng2-odometer>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content *ngIf="isIEOrEdge">
  <p></p>
  <ion-card>
    <img src="https://s3.amazonaws.com/turboarb/assets/imgs/stopie.png" />
    <ion-card-content>
      <ion-card-title>
       Use a Modern Browser.
      </ion-card-title>
      <p>
        Did you know that only
        <a href="http://gs.statcounter.com/browser-market-share">3% of the world uses Internet Explorer</a> to browse the internet? About time you caught up with the ROW.
      </p>
      <p>Sorry this app is not supported in IE. Please use Chrome now. Thanks!</p>
    </ion-card-content>
  </ion-card>
</ion-content>



<ion-content *ngIf="!isIEOrEdge" [ngClass]="{'barrel_roll': doRoll == true }"> 

    <!-- <ag-grid-angular style="width: 80%; height: 50%; padding:100px" class="ag-theme-balham" [rowData]="projects | async" [columnDefs]="columnDefs"
    [enableSorting]="true" [enableFilter]="true" rowSelection="single" [rowDragManaged]="true" [animateRows]="true" (selectionChanged)="onSelectionChanged($event)">
    </ag-grid-angular> -->


  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-list >
    <!-- <ion-item-divider color="light" style="cursor:url(http://lessonpix.com/drawings/1280/100x100/Fly.png),auto;" (click)="unleashBugs()">Projects List</ion-item-divider> -->
    <ion-item-divider color="light"  (click)="unleashBugs()">Projects List</ion-item-divider>


    
    <div *ngIf="loading" style="text-align:center;margin-top:0px;">
      <!-- <img  src="http://www.plateforme-re-sources.org/wp-content/uploads/2018/06/lg.rotating-balls-spinner.gif"/> -->
      <img src="https://cdn.dribbble.com/users/375824/screenshots/2230417/dots-2.gif" />
    </div>
    <!-- <h4  *ngIf="projects && !projects.length>0"  style="font-weight:100;text-align:center">No projects. Click or Tap the round button up to create a new assessment</h4> -->
    <ion-grid fixed >
      <ion-row responsive-sm>
        <ion-searchbar  placeholder="Search for Project Title, Description, Status, Assessor..." *ngIf="projects && !loading" [showCancelButton]="shouldShowCancel" (ionInput)="filterItems($event)" (ionCancel)="onCancel($event)">
        </ion-searchbar>
        <ion-col  *ngFor="let p of projects | async | reverse" col-md>
          <ion-card  [ngClass]="{'barrel_roll': rollOnlyBoxes == true }">
            <!-- <i class="fa fa-plus" aria-hidden="true"></i> -->
            <ion-fab right top (click)="itemTapped($event, p)">
              <button ion-fab *ngIf="p.score>65" color="secondary">
                <ion-icon name="">
                  <label style="font-family:arial;font-size:1.9rem;font-weight:bold">{{p.score}}%</label>
                </ion-icon>
              </button>
              <button ion-fab *ngIf="p.score<36" color="danger">
                <ion-icon name="">
                  <label style="font-family:arial;font-size:1.9rem;font-weight:bold">{{p.score}}%</label>
                </ion-icon>
              </button>
              <button ion-fab *ngIf="p.score>35 && p.score<66" color="orange">
                <ion-icon name="">
                  <label style="font-family:arial;font-size:1.9rem;font-weight:bold">{{p.score}}%</label>
                </ion-icon>
              </button>
            </ion-fab>

            <ion-item>
              <ion-icon name="analytics" item-start large></ion-icon>
              <h2>{{p.title}}</h2>
              <p>ARB result: {{p.verdict}}</p>
            </ion-item>

            <ion-item>
              <ion-icon name="logo-usd" item-start large></ion-icon>
              <h2>Status:
                <span [ngClass]="{Approved:'approved','Rejected':'rejected','Under Review':'review',
                      Submitted:'submitted','In Progress':'progress','Needs inputs':'inputs'}[p.status]">{{p.status}}</span>
              </h2>
              <p (click)="rollBoxes()" style="cursor:alias" >Last Updated: {{p.lastUpdated }}</p>
            </ion-item>

            <ion-item>
              <span item-start (click)="unleashBugs()"  >Assessor!:</span>
              <p>{{p.assessor}}</p>
              <button ion-button icon-start clear item-end (click)="itemTapped($event, p)">
                <ion-icon name="paper-plane"></ion-icon>
                <span *ngIf="!isMobile">View Details</span>
              </button>

              <button *ngIf="isAdminUser" (click)="deleteProject(p)" ion-button icon-start clear item-end>
                <ion-icon name="trash"></ion-icon>
              </button>
              <button *ngIf="isAdminUser" (click)="edit(p)" ion-button icon-start clear item-end>
                <ion-icon name="create"></ion-icon>
              </button>
              <button *ngIf="isAdminUser" (click)="approve(p)" ion-button icon-start clear item-end>
                <ion-icon name="checkbox-outline"></ion-icon>
              </button>
            </ion-item>

          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-list>




  <ion-fab top right>
    <button ion-fab color="primary" (click)="menu2Active()">
      <ion-icon name="create"></ion-icon>
    </button>
  </ion-fab>
</ion-content>

<ion-footer *ngIf="!isMobile && !bugsUnleashed" [ngClass]="{'barrel_roll': doRoll == true }">
  <ion-navbar color='grey'>
   
      <ion-buttons large>
          <button ion-button outline clear  (click)="unleashBugs()">
            <span style="font-size:1.5rem" >Version:{{version}}</span> &nbsp;
          </button>
        </ion-buttons>

     
  
        
        <div class="titleicon">
          <ion-title style="font-family: Verdana;
          font-style: normal;
          font-weight: 600;
          margin-bottom: 4px; cursor:alias" (click)="roll()"> Ameren EA</ion-title>
          <ion-title><small style="font-family:Arial Narrow, Helvetica, sans-serif;font-size:1.5rem">&copy; Copyright: 2018 All rights reserved for Ameren Corp </small></ion-title>
        </div>
        
        <!-- <ion-title end><small style="margin-bottom: 15px;">Contact Us: ea@ameren.com</small></ion-title> -->
  
    
    </ion-navbar>
</ion-footer>