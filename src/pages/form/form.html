<script src="http://github.hubspot.com/odometer/odometer.js"></script>
<link rel="stylesheet" href="http://github.hubspot.com/odometer/themes/odometer-theme-car.css" />
<ion-header>
    <ion-navbar color="primary">

        <ion-title>Form</ion-title>
    </ion-navbar>
</ion-header>


<ion-content padding id="listScroll" style="font-family:Avenir Next , sans-serif;" class="mycolor">

    <p></p>
    <div *ngIf="showSpinner" style="text-align:center;margin-top:150px;">
            <img  src="http://www.plateforme-re-sources.org/wp-content/uploads/2018/06/lg.rotating-balls-spinner.gif"/>
            <h4>Calculating score...</h4>
          </div>
 
    <div id="quiz" *ngIf="data != undefined && data.quiz != undefined && mode === 'quiz' && !showSpinner">
        <div class="center">
            <h3>{{projectTitle}}</h3>
            <h4> {{data.quiz.name|| "Assessment"}}</h4>
            <img height="80" width="80" src="{{data.quiz.logo}}" (click)="openHelp()" />
            <!-- <div id="odometer" class="odometer">{{odometer}}</div> -->
        </div>

        <ion-card>

            <ion-item>

                <p style="text-align:center">Question {{questionNumber}} of {{questions.length}}.</p>
            </ion-item>
            <!-- <ion-card-header>
            </ion-card-header> -->

            <ion-card-content>
                <ion-item>
                    <h3 style="margin-top:-0rem;white-space:normal;">{{question.Description}}&nbsp;
                        <ion-icon item-center (click)="openHelp()" name="help-circle"></ion-icon>
                    </h3>
                </ion-item>
                <div style="text-align:center">
                    <img *ngIf="question.Pic" src="{{question.Pic}}" style="width:25%" />
                </div>
                <ion-item class="item item-text-wrap item-divider " style="font-weight:bold">{{question.Name}}</ion-item>
                <ion-list radio-group [(ngModel)]="question.answer">

                    <ion-item *ngFor="let option of question.Options">
                        <ion-radio item-left value="{{option.Name}}"></ion-radio>
                        <ion-label>{{option.Name}}</ion-label>
                    </ion-item>


                    <!-- <div *ngFor="let option of question.Options">
                        <ion-item>

                            <ion-checkbox color="primary" checked="false" [(ngModel)]="option.Selected"></ion-checkbox>
                            <ion-label> {{option.Name}}</ion-label>
                        </ion-item>
                    </div> -->
                </ion-list>

            </ion-card-content>


            <br />

        </ion-card>

        <div style="text-align:center">

            <button *ngIf="questionNumber!=1" (click)="left()" ion-button icon-left>
                <ion-icon name="arrow-back"></ion-icon>
                Prev
            </button>

            <button [hidden]="questionNumber == questions.length" (click)="right()" ion-button icon-left>
                Next &nbsp;
                <ion-icon name="arrow-forward"></ion-icon>
            </button>

        </div>
        <div style="text-align:center">
            <button (click)="presentAbortConfirm()" color="danger" ion-button icon-left>
                <ion-icon name="close"></ion-icon>
                Abort
            </button>

            <button (click)="setMode('review')" ion-button icon-left>
                <ion-icon name="list"></ion-icon>
                Review
            </button>


            <button (click)="presentSubmitConfirm()" ion-button icon-left>
                Submit &nbsp;
                <ion-icon name="checkmark-circle-outline"></ion-icon>
            </button>

        </div>
    </div>


    <p></p>


    <div *ngIf="mode=='review' && !showSpinner" class="review">
        <p></p>
        <div *ngFor="let question of questions; let i = index;">
            <div (click)="goTo(i + 1)" class="{{ isAnswered(question) == 'Answered'? 'answered': 'not-answered' }}">{{i + 1}}. {{ isAnswered(question) }}</div>
        </div>
        <p></p>
        <button ion-button (click)="setMode('quiz')"> Back </button>
    </div>



    <div class="center result" *ngIf="mode=='result' && !showSpinner">
            <p></p>
            <ion-card>
                <ion-item>
                    <ion-avatar item-left>
                        <img src="https://vignette.wikia.nocookie.net/mysims/images/2/22/EA_logo.png/revision/latest?cb=20090801182220">
                    </ion-avatar>
                    <h2>Score Card</h2>
                    <p>{{verdict}}</p>
                </ion-item>
                <hr/>
    
                <ion-grid>
                    <ion-row>
                        <ion-col>
                             <img src="https://communications.fidelity.com/pi/calculators/saving-for-retirement/assets/images/rpm-dial.png"/>
                        </ion-col>
                        <ion-col>
                                <div class="item item-body">
                    
                                    <div class="row">
                                        <div class="col col-80">Total Questions</div>
                                        <div class="col col-20">{{questions.length}}</div>
                                    </div>
                    
                                    <div class="row">
                                        <div class="col col-80">Correct Answers</div>
                                        <div class="col col-20">{{correct}}</div>
                                    </div>
                    
                                    <div class="row">
                                        <div class="col col-80">Incorrect Answers</div>
                                        <div class="col col-20">{{questions.length - correct}}</div>
                                    </div>
                    
                                    <div class="row">
                                        <div class="col col-80">Total</div>
                                        <div class="col col-20"><strong>{{score}} %</strong></div>
                                    </div>
                                    <div class="row">
                                        <div class="col col-80"><strong>Result</strong></div>
                                        <div class="col col-20"><strong>{{verdict}}</strong></div>
                                    </div>
                                    <hr/>
                                    <!-- <img class="full-image" height="150" width="100" ng-src="data/img/table.jpg"> -->
                                    <p class="center">
                    
                                        <button ion-button (click)="closeResults()">Close</button>
                                    </p>
                    
                                </div></ion-col>
                    </ion-row>
                </ion-grid>
            </ion-card>
            <p></p>
    
    
    
            <p class="center">
                Your responses are highlighted in green.
            </p>
            <div *ngFor="let question of questions; let i = index">
                <div class="result-question">
                    <h3>{{i + 1}}. {{question.Name}}</h3>
                    <div class="result-options">
                        <div *ngFor="let Option of question.Options">
                            <label class="{{  question.answer == Option.Name ? 'result-correct': 'result-incorrect' }}"> 
                                <input id="{{Option.Id}}" type="checkbox" disabled="disabled" readonly="readonly" [checked]="question.answer == Option.Name" /> {{Option.Name}}
                            </label>
                        </div>
                    </div>
                    <p></p>
                    <!-- <button ion-button color="secondary" *ngIf="isCorrect(question) == 'Correct'" round>Correct Answer.</button>
                    <button ion-button color="danger" *ngIf="isCorrect(question) != 'Correct'" round>Wrong Answer.</button>
    
                    <button *ngIf="question.Explanation" (click)="openExplanationModal(question)" ion-button round>Explanation</button>
     -->
                </div>
            </div>
            <div class="center">
                <button ion-button (click)="closeResults()">Close</button>
            </div>
    
    
        </div>
    


    <ion-menu [content]="mycontent" id="menu2" side="right" width="500">

        <ion-header>
            <ion-toolbar color="grey">
                <ion-title>Help1</ion-title>
                <ion-buttons large end>
                    <button ion-button outline clear menuClose="menu2">
                        <ion-icon style="font-size:3rem;font-weight:bold;" name="close"></ion-icon>
                    </button>
                </ion-buttons>


            </ion-toolbar>
        </ion-header>

        <ion-content>
            <ion-list>
                <!-- <button ion-item  detail-none>
                    Close Menu 2
                </button> -->
                <div [innerHTML]="somedata"></div>



                <p>&nbsp;</p>
                <div>
                    Was this helpful?
                    <button ion-button color="light" outline>No</button>
                    <button ion-button color="light" outline>Yes</button>
                </div>
            </ion-list>



        </ion-content>

    </ion-menu>


</ion-content>

<ion-nav [root]="ListPage" #mycontent swipeBackEnabled="false"></ion-nav>